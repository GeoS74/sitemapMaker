# sitemap maker

Сервис для формирования sitemap файлов. Использует API стороннего сервиса для получения ссылок на страницы, а также читает файл `static.url`, в котором можно указать отдельные статичные страницы сайта.

Первый запуск происходит с задержкой (см. env `START_MSTIME`). После запуска начинает считывать файл `static.url`, а затем обращается к стороннему API для получения ссылок на страницы. В процессе формирования файлов sitemap сначала сохраняет их во временную директорию (т.к. формирование карты сайта может занимать некоторое время), а по окончании перемещает новые файлы в основную директорию.

### Docker

[Образ на hub.docker](https://hub.docker.com/repository/docker/geos74/sitemap-maker/general)

#### environment

`SERVER_PORT` - порт, на котором запускается сервер

`BASE_URL` - базовый url для ссылок

`API_PAGES` - адрес API стороннего сервиса для получения страниц

`API_PAGES_LIMIT` - кол-во страниц, запрашиваемых со стороннего API за один запрос

`MAX_URLS_FOR_SITEMAP` - количество url в файле 1-ом sitemap ((по умолчанию 30000))

`START_MSTIME` - задержка перед первым выполнением, ms (по умолчанию 1 мин)

`RESTART_MSTIME` - пауза между повторным формированием карты сайта, ms (по умолчанию 1 неделя)